<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JSS Water App</title>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

</head>
<body style="margin:0;font-family:Arial;background:#0c2132;color:white;">

<!-- ================= GLOBAL SCRIPT ================= -->
<script>
function showScreen(id){
    // hide welcome screen
    document.querySelector(".cd-intro").style.display = "none";

    // hide all app screens
    document.querySelectorAll(".screen").forEach(s=>s.style.display="none");

    // show selected screen
    document.getElementById(id).style.display="flex";
    if (id == "home") {
        document.getElementById(id).style.display="block";
    }
}

// function showScreen(id){
//     document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
//     // document.getElementById(id).style.display="flex";
//     // if (id == "home") {
//     // document.getElementById(id).style.display="block";
//     // }
//     document.getElementById("home").style.display="block";
// }
</script>


<!-- ================= WELCOME SCREEN ================= -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,700,400" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:"Open Sans",sans-serif;}

body{
    background:#2e416a;
}

/* Intro container */
.cd-intro{
    height:100vh;
    width:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#2e416a;
    overflow:hidden;
}

/* Mask-2 animation area */
.mask-2{
    text-align:center;
    color:white;
    position:relative;
}

.content-wrapper{
    position:relative;
    max-width:650px;
    margin:auto;
    padding:2em 0;
    overflow:hidden;
}

/* vertical pulse line */
.content-wrapper::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    height:100%;
    width:2px;
    background:white;
    animation:pulse 1.3s .3s both;
}

.h1-i{
    font-size:2rem;
    font-weight:700;
    margin-bottom:10px;
    animation:slideIn 0.5s 1.1s both;
}

.p-i{
    font-size:1.4rem;
    color:#cfd8f0;
    animation:slideIn2 0.5s 1.1s both;
}

/* animations */
@keyframes slideIn{
    from{transform:translateX(-100%);}
    to{transform:translateX(0);}
}

@keyframes slideIn2{
    from{transform:translateX(100%);}
    to{transform:translateX(0);}
}

@keyframes pulse{
    0%,30%{opacity:0;}
    50%{opacity:1;}
    100%{opacity:0;}
}
.screen{
    display:none;
}

</style>

</head>

<body>

<section class="cd-intro">
    <div class="mask-2">
        <div class="content-wrapper">
            <div>
                <h1 class="h1-i">JSS Water Services</h1>
                <p class="p-i">Salem, Elampillai</p>
            </div>
        </div>
    </div>
</section>

<script>
// JS for welcome
setTimeout(()=>showScreen("login"),4000);
</script>


<!-- ================= LOGIN SCREEN ================= -->
<style>
/* CSS for login */
.login{
    display:none;
    height:100vh;
    justify-content:center;
    align-items:center;
}
.login .box{
    width:80%;
    margin:auto;
    background:#1a2a3a;
    padding:25px;
    border-radius:10px;
    text-align:center;
    justify-content: center;
}
.login input{
    width:90%;
    padding:10px;
    margin:6px 0;
    border:none;
    border-radius:6px;
}
.login button{
    width:100%;
    padding:10px;
    background:#00aaff;
    color:white;
}
.link{
    color:deepskyblue;
    cursor:pointer;
    margin-top:10px;
}
</style>

<div id="login" class="screen login">
    <!-- HTML login -->
    <div class="box">
        <h2>Login</h2>
        <input id="loginId" placeholder="Id">
        <input id="loginPass" type="password" placeholder="Password">
        <button onclick="login()">Login</button>

        <div class="link" onclick="showScreen('signup')">
            New user? Sign up
        </div>
    </div>
</div>

<script>
// JS for login
function login(){
    const id=document.getElementById("loginId").value.trim();
    const pass=document.getElementById("loginPass").value.trim();
    const user=JSON.parse(localStorage.getItem("user"));

    if(!user||id!==user.name||pass!==user.pass){
        alert("Invalid login");
        return;
    }
    showScreen("home");
}
</script>


<!-- ================= SIGNUP SCREEN ================= -->
<style>
/* CSS for signup */
.signup{
    display:none;
    height:100vh;
    justify-content:center;
    align-items:center;
}
.signup .box{
    width:80%;
    margin:auto;
    background:#1a2a3a;
    padding:25px;
    border-radius:10px;
    align-items: center;
    text-align:center;
}
.signup input{
    width:90%;
    padding:10px;
    margin:6px 0;
    border:none;
    border-radius:6px;
    font: 1em sans-serif;
}
.signup button{
    width:100%;
    padding:10px;
    background:#00aaff;
    color:white;
}
#mapBox{
    height:250px;
    display:none;
    margin-top:10px;
    border-radius:10px;
}
.popupOverlay2{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:none;
    justify-content:center;
    align-items:center;
}

.popupBox2{
    background:#222;
    padding:20px;
    border-radius:10px;
    width:300px;
    max-height:80vh;
    overflow:auto;
    color:white;
}

.function-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
    background:#111;
    padding:8px;
    border-radius:6px;
}

.function-item img{
    width:40px;
}

</style>

<div id="signup" class="screen signup">
    <!-- HTML signup -->
    <div class="box">
        <h2>Sign Up</h2>
        <input id="name" style="width: 100%;" placeholder="Name">
        <div style="display: flex;justify-content: space-around;">
            <input id="password" style="width: 85%;" type="password" placeholder="Password">
        <div id="btnText-log" style="width: 30px;margin-top: 3px;background-color: #79828600;font-size: 2rem;cursor: pointer;" onclick="togglePass()">ðŸ”’</div>
        </div>
        <div style="display: flex;justify-content: space-around;">
        <input id="address" style="width: 85%;" placeholder="Address (click icon to get)" readonly>
        <div style="width: 30px;height: 40px;" onclick="openMap()"><img style="width: 30px;height: 40px;padding: 0;margin: 0;padding-top: 5px;" src="https://img.icons8.com/?size=100&id=6OOnASO9fxuG&format=png&color=000000" alt=""></div>
        </div>
        <br>
        <div id="mapBox"></div>

        <button onclick="signup()">Create Account</button>
        <div class="link" onclick="showScreen('login')">
            Back to Login
        </div>
    </div>
</div>

<script>
// JS for signup
function signup(){
    const name=document.getElementById("name").value.trim();
    const pass=document.getElementById("password").value.trim();
    const addr=document.getElementById("address").value.trim();

    if(!name||!pass||!addr){
        alert("Fill all fields");
        return;
    }

    localStorage.setItem("user",JSON.stringify({name,pass,addr}));
    alert("Signup Success");
    showScreen("login");
}

function togglePass(){
    const p=document.getElementById("password");
    document.getElementById("btnText-log").innerText=p.type==="password"?"ðŸ”“":"ðŸ”’";
    p.type=p.type==="password"?"text":"password";
}

/* MAP */
let map,marker;
const SALEM=[11.6076,78.0037];

function openMap(){
    document.getElementById("mapBox").style.display="block";
    if(map)return;

    map=L.map("mapBox").setView(SALEM,13);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

    marker=L.marker(SALEM,{draggable:true}).addTo(map);
    setCoord(SALEM);

    marker.on("dragend",()=>{
        const c=marker.getLatLng();
        setCoord([c.lat,c.lng]);
    });

    map.on("click",e=>{
        marker.setLatLng(e.latlng);
        setCoord([e.latlng.lat,e.latlng.lng]);
    });
}

function setCoord(c){
    document.getElementById("address").value=
    c[0].toFixed(4)+", "+c[1].toFixed(4);
}
</script>

    <!-- ================= HOME SCREEN ================= -->
    <style>
    .topbar{
        background:#0b5fa5;
        padding:12px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        color:white;
    }
    .big-btn{
        width:200px;
        height:200px;
        margin:40px auto;
        background:#00d8ff ;
        border-radius:50%;
        display:flex;
        justify-content:center;
        border: solid 10px #1c1b1b;
        align-items:center;
        font-size:22px;
        /* cursor:pointer; */
        color:rgb(111, 99, 99);
        position:relative;
    }
    .bottombar{
        width:100%;
        padding:8px;
    }

    /* ===== Square Slideshow ===== */
    .slide-box{
        width:100%;
        max-width:300px;
        aspect-ratio:1/1;
        overflow:hidden;
        margin:10px auto;
        border-radius:12px;
        position:relative;
    }
    .slide-track{
        display:flex;
        height:100%;
        transition:transform 0.6s ease;
    }
    .slide-track img{
        width:100%;
        height:100%;
        object-fit:cover;
        flex-shrink:0;
    }

    /* Loader */
    .loader::before {
        content: "";
        position: absolute;
        inset: 0;
        border: 16px solid transparent;
        border-top: 4px solid #fff;
        border-radius: 50%;
        animation: spin 2s linear infinite;
    }
    @keyframes spin {
        from { transform: rotate(0deg); }
        to   { transform: rotate(360deg); }
    }
    #qty{ width:30px; text-align:center; font-size:16px;height: 30px; }
    #idbtn-l, #idbtn-r{ width:35px; height: 35px; font-size:16px;background-color: coral; }
    #idbtn-l{ border-radius: 50% 0 0 50%; }
    #idbtn-r{ border-radius: 0 50% 50% 0; }
    /* ===== Popup ===== */
    #popupOverlay{
        position:fixed;
        inset:0;
        background:rgba(0,0,0,0.5);
        display:flex;
        justify-content:center;
        align-items:center;
        visibility:hidden;
        opacity:0;
        transition:opacity 0.3s ease;
    }
    #popupOverlay.active{
        visibility:visible;
        opacity:1;
    }
    .popupBox{
        background:rgb(51, 51, 51);
        color: #ffffff;
        padding:25px;
        border-radius:12px;
        min-width:260px;
        text-align:center;
        transform:scale(0.8);
        transition:transform 0.3s ease;
    }
    #popupOverlay.active .popupBox{
        transform:scale(1);
    }
    button{
        padding:6px 12px;
        margin:4px;
    }
    .popupBox{
        background:rgb(54, 54, 54);
        padding:25px;
        border-radius:12px;
        min-width:260px;
        text-align:center;
        transform:scale(0.8);
        transition:transform 0.3s ease;
        color:#ffffff;              /* ensure text visible */
    }

    /* message style */
    #popupMessage{
        font-size:18px;
        font-weight:bold;
        margin-bottom:15px;
        color:#ffffff;
    }
    .truck-box{
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        gap:8px;
    }

    .truck-box img{
        width:90px;
        height:auto;
    }
    #cartScreen, #profileScreen{
       
        min-width: 300px;
        margin:20px auto;
        height: max-content;
        color:white;
        padding:15px;
        border-radius:10px;
    }

    .cartBox{

        padding:20px;
        width: 90%;
    }
    .dayBox{
        background:#1a2a3a;
        margin-bottom:15px;
        padding:12px;
        border-radius:8px;
    }
    .dayTitle{
        font-weight:bold;
        margin-bottom:8px;
        color:#00aaff;
    }
    .item{
        display:flex;
        justify-content:space-between;
        /* padding:4px 0; */
        border-bottom:1px solid #333;
    }
    .entry{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:10px 12px;
    margin:6px 0;
    background:#111;
    color:#fff;
    border-radius:8px;
    font-size:15px;
}

.entry .col{
    flex:1;
    text-align:center;
}

.entry .col:first-child{
    text-align:left;
}

.entry .col:last-child{
    text-align:right;
    font-weight:bold;
}

    .bott-tit{
        display: flex;
        justify-content: space-between;
        padding-right: 15px;
        align-items: center;
    }

    .pobtn{
        background-color: #113b5d;
        color: #78e6f9;
        height: 40px;
    }
    .func-item{
        display:flex;
        justify-content:space-between;
        align-items:center;
        background:#111;
        padding:10px;
        margin-bottom:10px;
        border-radius:8px;
    }

    .func-left{
        display:flex;
        gap:10px;
        align-items:center;
    }

    .func-left img{
        width:45px;
        height:auto;
    }

    .qty-box{
        display:flex;
        align-items:center;
        gap:5px;
    }

    .qty-btn{
        width:30px;
        height:30px;
        font-size:18px;
        background:#0b5fa5;
        color:white;
        border:none;
    }

    .qty-btn-l{
        border-radius: 50% 0 0 50%;
    }

    .qty-btn-r{
        border-radius: 0 50% 50% 0;
    }

    .qqttyy-inp{
        width: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #00aaff00;
        color: #ffffff;
        border: none;
    }
    </style>


    <div id="home" class="screen home">

    <div class="topbar">
        <span onclick="showHome()" >JSS Water</span> 
        <div style="display:flex; gap:15px; align-items:center;">
            <div onclick="showCart()">Cart ðŸ›’</div>
            <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png"
                onclick="showProfile()"
                style="width:32px; height:32px; border-radius:50%;">
        </div>
    </div>

    <div id="bigBtn" class="big-btn" onclick="handleBigBtn()">
        <div id="btnContent">
            <div id="btnText">Need Water</div>
        </div>
    </div>

    <div class="bottombar">
        
        <div class="bott-tit"><h4>Function Order Items </h4>
            <button class="pobtn" onclick="openFunctionOrder()">Place OrderâŒ¯âŒ²</button>
        </div>
        <div class="slide-box">
            <div class="slide-track" id="slideTrack"></div>
        </div>
    </div>

    <div id="cartScreen" style="display:none; padding:15px;">
        <div id="cartBox" class="cartBox"></div>
    </div>

    <div id="profileScreen" style="display:none; padding:15px; text-align:center;">
        <div id="profileContainer"></div>
    </div>

    <!-- Popup -->
    <div id="popupOverlay" onclick="overlayClick(event)">
        <div class="popupBox">

            <div id="popupMessage">Select quantity(optional)</div>

            <div id="qtyControls">
                <button id="idbtn-l" onclick="changeQty(-1)">-</button>
                <input id="qty" type="number" value="1" readonly>
                <button id="idbtn-r" onclick="changeQty(1)">+</button>
            </div>

            <br>

            <button id="confirmBtn" onclick="confirmOrder()">Confirm</button>
            <button id="cancelbtn" onclick="closePopup()">Cancel</button>

        </div>
    </div>
<!-- FUNCTION ORDER SCREEN -->
<div id="functionScreen" style="display:none; padding:15px;">
    <h3>Function Order</h3>
    <div id="functionList"></div>

    <button class="pobtn" style="width:100%; margin-top:15px;"
            onclick="showBillScreen()">
        Continue â‰«
    </button>
</div>

<!-- BILL SCREEN -->
<div id="billScreen" style="display:none; padding:15px;">
    <!-- back btn to go function order screen -->
     <button class="pobtn" style="width:100%; margin-top:15px; width: 90px;border-radius: 50% 50% 50% 50%;background-color: #0a7889;color: white;font-size: 18px;height: 40px;margin-bottom: 10px;"
            onclick="showFunctionOrder()">
        â†© Back
    </button>
    <h3>Bill</h3>
    <div id="billList"></div>

    <button class="pobtn" style="width:100%; margin-top:15px;"
            onclick="confirmFunctionOrder()">
        Confirm Order
    </button>
</div>


    </div>

    <script>
    const user = {
        profile_url : "https://cdn-icons-png.flaticon.com/512/847/847969.png",
        name: "Nova",
        id: "JSS1024",
        location: "Kattur",
        price: 30
    };

    let cart=[];
    let orderPlaced=false;

    function handleBigBtn(){
        if(orderPlaced){
            // cancel popup
            document.getElementById("popupMessage").innerText =
                "Order already placed. Cancel order?";
            document.getElementById("qtyControls").style.display="none";
            document.getElementById("confirmBtn").innerText="Cancel Order";
            document.getElementById("cancelbtn").innerText="No";
            document.getElementById("confirmBtn").onclick=cancelOrder;
        }else{
            // normal order popup
            document.getElementById("popupMessage").innerText="Select quantity";
            document.getElementById("qtyControls").style.display="block";
            document.getElementById("confirmBtn").innerText="Confirm";
            document.getElementById("cancelbtn").innerText="Cancel";
            document.getElementById("confirmBtn").onclick=confirmOrder;
        }

        openPopup();
    }
    function renderProfile(userData) {

        const container = document.getElementById("profileContainer");

        container.innerHTML = `
            <img src="${userData.profile_url}" alt="Profile Picture"
                style="width:90px; border-radius:50%; margin-bottom:10px;">
            <h3>${userData.name}</h3>
            <p>ID: <span>${userData.id}</span></p>
            <p>Location: <span>${userData.location}</span></p>
            <p>Per Can Price: â‚¹<span>${userData.price}</span></p>
        `;
    }
    
    function openPopup(){
        document.getElementById("popupOverlay").classList.add("active");
    }
    function closePopup(){
        document.getElementById("popupOverlay").classList.remove("active");
    }
    function overlayClick(e){
        if(e.target.id==="popupOverlay"){
            closePopup();
        }
    }

    function changeQty(v){
        const q=document.getElementById("qty");
        let val=parseInt(q.value)||1;
        val+=v;
        if(val<1)val=1;
        q.value=val;
    }
    
    /* ===== CONFIRM ORDER ===== */
    function confirmOrder(){
        const qty=parseInt(document.getElementById("qty").value);
        cart=[{item:"20L Can",qty}];
        orderPlaced=true;

        const bigBtn = document.getElementById("bigBtn");
        const content = document.getElementById("btnContent");
        bigBtn.style.backgroundColor="#0070ff";
        bigBtn.style.color="white";
        bigBtn.classList.add("loader");

        content.innerHTML = `
            <div class="truck-box">
                <img src="https://cdnl.iconscout.com/lottie/premium/thumb/delivery-man-drive-delivery-truck-animation-gif-download-7480788.gif">
                <div>Order Placed</div>
            </div>
        `;

        closePopup();
    }

    /* ===== CANCEL ORDER ===== */
    function cancelOrder(){
        cart=[];
        orderPlaced=false;
        const bigBtn = document.getElementById("bigBtn");
        const content = document.getElementById("btnContent");
        bigBtn.style.backgroundColor="#00d8ff ";
        bigBtn.style.color="rgb(111, 99, 99)";
        bigBtn.classList.remove("loader");

        content.innerHTML = `
            <div id="btnText">Need Water</div>
        `;

        closePopup();
    }

    function showHome(){

        document.getElementById("bigBtn").style.display="flex";
        document.querySelector(".bottombar").style.display="block";
        document.getElementById("cartScreen").style.display="none";
        document.getElementById("profileScreen").style.display="none";
        document.getElementById("functionScreen").style.display="none";
        document.getElementById("billScreen").style.display="none";
        // change body bg #0c2132
        document.body.style.backgroundColor="#0c2132";
    }


    function showCart(){
        document.getElementById("bigBtn").style.display="none";
        document.querySelector(".bottombar").style.display="none";
        document.getElementById("profileScreen").style.display="none";
        document.getElementById("profileScreen").style.display="none";
        document.getElementById("functionScreen").style.display="none";
        document.getElementById("billScreen").style.display="none";
        document.getElementById("cartScreen").style.display="block";
        
        document.body.style.backgroundColor="#222";
        const data = [
    {
        date: "2021-08-10",
        orders: [
            { load:3, empty:3, amount:90 ,status:"Delivered" },
            { load:5, empty:5, amount:150 ,status:"Delivered" }
        ],
        function_orders: [
            { size:"300ml", qty:3, amount:150, status:"Delivered" },
            { size:"500ml", qty:5, amount:57, status:"Delivered" },
            { size:"1L", qty:2, amount:200, status:"Delivered" },
            { size:"2L", qty:46, amount:4646, status:"Delivered" }
        ]
    },
    {
        date: "2021-08-11",
        orders: [
            { load:3, empty:3, amount:90, status:"Delivered" },
            { load:5, empty:5, amount:150, status:"Delivered" }
        ]
    },
    {
        date: "2021-08-12",
        orders: [
            { load:3, empty:3, amount:90, status:"Delivered" },
            { load:5, empty:5, amount:150, status:"Delivered" }
        ]
    }
    ];
    console.log("show cart")

    /* SORT latest date on top */
    data.sort((a,b)=> new Date(b.date) - new Date(a.date));

    const cartBox = document.getElementById("cartBox");
    cartBox.innerHTML = ""; 
    data.forEach(day => {

    if(day.orders){
    day.orders.forEach(o=>{
        if(o.load !== 0 || o.empty !== 0){
            cartBox.innerHTML += `
            <div class="entry">
                <div class="col">${day.date}</div>
                <div class="col">${o.load}-${o.empty}</div>
                <div class="col">â‚¹${o.amount}</div>
            </div>`;
        }
    });
}

/* Function orders */
if(day.function_orders){

    let items = [];
    let totalAmount = 0;

    day.function_orders.forEach(f => {
        if(f.qty > 0){
            items.push(`${f.size} x${f.qty}`);
            totalAmount += f.amount;
        }
    });

    if(items.length > 0){
        cartBox.innerHTML += `
        <div class="entry">
            <div class="col">${day.date}</div>
            <div class="col">${items.join(" <br> ")}</div>
            <div class="col">â‚¹${totalAmount}</div>
        </div>`;
    }
}

});

    }
    function showProfile(){
        document.getElementById("bigBtn").style.display="none";
        document.querySelector(".bottombar").style.display="none";
        document.getElementById("cartScreen").style.display="none";
        document.getElementById("profileScreen").style.display="none";
        document.getElementById("functionScreen").style.display="none";
        document.getElementById("billScreen").style.display="none";
        document.getElementById("profileScreen").style.display="block";

        document.body.style.backgroundColor="#222";
        renderProfile(user);
    }


    document.addEventListener("keydown",function(e){
        if(e.key==="Escape") closePopup();
    });

    /* ===== Slider ===== */
    const imageList = [
        "https://raw.githubusercontent.com/nova-07-07-07/imgs/refs/heads/main/1_300ml_c.jpg",
        "https://raw.githubusercontent.com/nova-07-07-07/imgs/refs/heads/main/2_300ml.jpg",
        "https://raw.githubusercontent.com/nova-07-07-07/imgs/refs/heads/main/3_500ml.jpg",
        "https://raw.githubusercontent.com/nova-07-07-07/imgs/refs/heads/main/4_1l.jpg",
        "https://raw.githubusercontent.com/nova-07-07-07/imgs/refs/heads/main/5_3001l.jpg",
        "https://raw.githubusercontent.com/nova-07-07-07/imgs/refs/heads/main/6_all.jpg"
    ];

    const track = document.getElementById("slideTrack");

    imageList.forEach(src=>{
        const img=document.createElement("img");
        img.src=src;
        track.appendChild(img);
    });

    const firstClone=document.createElement("img");
    firstClone.src=imageList[0];
    track.appendChild(firstClone);

    let index=0;

    setInterval(()=>{
        index++;
        track.style.transform=`translateX(-${index*100}%)`;

        if(index===imageList.length){
            setTimeout(()=>{
                track.style.transition="none";
                track.style.transform="translateX(0)";
                index=0;
                setTimeout(()=>{
                    track.style.transition="transform 0.6s ease";
                },50);
            },600);
        }
    },2500);
function showOrderPlacedUI(){
    const bigBtn = document.getElementById("bigBtn");
    const content = document.getElementById("btnContent");

    bigBtn.style.backgroundColor = "#0070ff";
    bigBtn.style.color = "white";
    bigBtn.classList.add("loader");

    content.innerHTML = `
        <div class="truck-box">
            <img src="https://cdnl.iconscout.com/lottie/premium/thumb/delivery-man-drive-delivery-truck-animation-gif-download-7480788.gif">
            <div>Order Placed</div>
        </div>
    `;
}

    document.addEventListener("DOMContentLoaded", function(){
    renderProfile(user);

    if(orderPlaced){
        showOrderPlacedUI();
    }
});

    const functionProducts = [
    {name:"300ml", price:10, img:imageList[0]},
    {name:"500ml", price:15, img:imageList[2]},
    {name:"1L", price:20, img:imageList[3]},
    {name:"2L", price:30, img:imageList[3]},
    {name:"20L", price:40, img:imageList[5]}
];

let selectedItems = [];

function openFunctionOrder(){
    document.getElementById("bigBtn").style.display="none";
    document.querySelector(".bottombar").style.display="none";
    document.getElementById("cartScreen").style.display="none";
    document.getElementById("profileScreen").style.display="none";

    document.getElementById("functionScreen").style.display="block";
    renderFunctionScreen();
}
function showFunctionOrder(){
    // hide bill screen
    document.getElementById("billScreen").style.display = "none";

    // show function order screen
    document.getElementById("functionScreen").style.display = "block";

    // hide other screens
    document.getElementById("cartScreen").style.display = "none";
    document.getElementById("profileScreen").style.display = "none";

    // hide home elements
    document.getElementById("bigBtn").style.display = "none";
    document.querySelector(".bottombar").style.display = "none";
}

function renderFunctionScreen(){
    const list = document.getElementById("functionList");
    list.innerHTML = "";

    functionProducts.forEach((item,i)=>{
        list.innerHTML += `
        <div class="func-item">
            <div class="func-left">
                <img src="${item.img}">
                <div>${item.name}</div>
            </div>
            <div class="qty-box">
                <button class="qty-btn qty-btn-l" onclick="changeFuncQty(${i},-1)">-</button>
                <input class="qqttyy-inp" id="funcQty${i}" value="0"  />
                <button class="qty-btn qty-btn-r" onclick="changeFuncQty(${i},1)">+</button>
            </div>
        </div>`;
    });
}

function changeFuncQty(i,val){
    let el = document.getElementById("funcQty"+i);
    let qty = parseInt(el.value);
    qty += val;
    if(qty<0) qty=0;
    el.value = qty;
}

function showBillScreen(){
    const bill = document.getElementById("billList");
    bill.innerHTML = "";

    let total = 0;
    selectedItems = [];
    let hasItem = false; // check flag

    functionProducts.forEach((item,i)=>{
        let qty = parseInt(document.getElementById("funcQty"+i).value);

        if(qty > 0){
            hasItem = true; // at least one item selected

            let amount = qty * item.price;
            total += amount;
            selectedItems.push({...item, qty, amount});

            bill.innerHTML += `
            <div class="func-item">
                <span>${item.name} x ${qty}</span>
                <span>â‚¹${amount}</span>
            </div>`;
        }
    });

    // if no item selected
    if(!hasItem){
        alert("Select at least one item");
        return;
    }

    bill.innerHTML += `
        <hr>
        <div style="display:flex; justify-content:space-between;">
            <h4>Total</h4>
            <h4>â‚¹${total}</h4>
        </div>`;

    // switch screens
    document.getElementById("functionScreen").style.display="none";
    document.getElementById("billScreen").style.display="block";
}


function confirmFunctionOrder(){
    if(selectedItems.length === 0){
        alert("Select at least one item");
        return;
    }

    // hide bill screen
    document.getElementById("billScreen").style.display = "none";

    // show home
    showHome();

    confirmOrder();
}

    </script>



    </body>
    </html>
