<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSS Water Services</title>
    <!-- Leaflet styles & script for map functionality -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <script src="./script.js"></script>
<!-- intro section -->
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:"Open Sans",sans-serif;}

/* body{
    background:#1f1734;
} */

/* Intro container */
.cd-intro{
    height:100vh;
    width:100%;
    display:none;
    align-items:center;
    justify-content:center;
    background:#1f1734;
    overflow:hidden;
}

/* Mask-2 animation area */
.mask-2{
    text-align:center;
    color:white;
    position:relative;
}

.content-wrapper{
    position:relative;
    max-width:650px;
    margin:auto;
    padding:2em 0;
    overflow:hidden;
}

/* vertical pulse line */
.content-wrapper::before{
    content:'';
    position:absolute;
    top:0;
    left:0;
    height:100%;
    width:2px;
    background:white;
    animation:pulse 1.3s .3s both;
}

.h1-i{
    font-size:2rem;
    font-weight:700;
    margin-bottom:10px;
    animation:slideIn 0.5s 1.1s both;
}

.p-i{
    font-size:1.4rem;
    color:#cfd8f0;
    animation:slideIn2 0.5s 1.1s both;
}

/* animations */
@keyframes slideIn{
    from{transform:translateX(-100%);}
    to{transform:translateX(0);}
}

@keyframes slideIn2{
    from{transform:translateX(100%);}
    to{transform:translateX(0);}
}

@keyframes pulse{
    0%,30%{opacity:0;}
    50%{opacity:1;}
    100%{opacity:0;}
}
.screen{
    display:none;
}
</style>

<section class="cd-intro">
    <div class="mask-2">
        <div class="content-wrapper">
            <div>
                <h1 class="h1-i">JSS Water Services</h1>
                <p class="p-i">Salem, Elampillai</p>
            </div>
        </div>
    </div>
</section>

<!-- popup section  -->

<style>
.popupwindow{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.65);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:999;
    backdrop-filter: blur(3px);
}

.popupcontent{
    background:linear-gradient(145deg,#2a2a2a,#1c1c1c);
    padding:20px;
    padding-top:5px;
    border-radius:16px;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    align-items:center;
    width:320px;
    max-height:90vh;
    overflow:auto;
    color:white;
    box-shadow:0 15px 35px rgba(0,0,0,0.5);
    animation:popupScale 0.2s ease;
}

/* Smooth open animation */
@keyframes popupScale{
    from{
        transform:scale(0.9);
        opacity:0;
    }
    to{
        transform:scale(1);
        opacity:1;
    }
}

#popupBtn{
    padding:4px 10px;
    background:#ff4d4d;
    color:white;
    border:none;
    border-radius:50%;
    font-size:1rem;
    width:30px;
    height:30px;
    cursor:pointer;
    transition:0.2s;
}

#popupBtn:hover{
    background:#ff1a1a;
    transform:scale(1.1);
}

#popupTop{
    font-size:1.2rem;
    font-weight:600;
    text-align:center;
}

#popupBottom{
    width:100%;
    font-size:0.95rem;
    line-height:1.5;
}

#popupBottom p{
    background:#333;
    padding:10px;
    border-radius:10px;
    margin:8px 0;
}

hr{
    border:none;
    border-top:1px solid #444;
    margin:10px 0;
}
</style>


<div class="popupwindow" id="popupwindow">
    <div class="popupcontent">
        <div style="display:flex;justify-content:end;align-items:center;width:100%;">
            <button id="popupBtn" onclick="closePopup()">X</button>
        </div>
        <div id="popupTop" style="margin-bottom: 5px;"></div>
        <hr width="100%">
        <div id="popupBottom" style="margin-top: 15px;"></div>
    </div>
</div>

<!-- login section  -->

<style>
/* Login screen background */
.login{
    display:none;
    height:100vh;
    justify-content:center;
    align-items:center;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    font-family: Arial, sans-serif;
}

/* Login box */
.login .box{
    width:320px;
    background:#1a2a3a;
    padding:30px 25px;
    border-radius:12px;
    text-align:center;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

/* Title */
.login .box h2{
    margin-bottom:20px;
    color:#ffffff;
}

/* Inputs */
.login input{
    width:100%;
    padding:12px;
    margin:8px 0;
    border:none;
    border-radius:8px;
    outline:none;
    font-size:14px;
    background:#f1f1f1;
    transition:0.2s;
}

.login input:focus{
    background:#ffffff;
    box-shadow:0 0 0 2px #00aaff;
}

/* Button */
.login button{
    width:100%;
    padding:12px;
    margin-top:12px;
    background:linear-gradient(135deg, #00aaff, #0077ff);
    color:white;
    border:none;
    border-radius:8px;
    font-size:15px;
    font-weight:bold;
    cursor:pointer;
    transition:0.2s;
}

.login button:hover{
    transform:translateY(-1px);
    box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

/* Signup link */
.link{
    color:deepskyblue;
    cursor:pointer;
    margin-top:14px;
    font-size:14px;
}

.link:hover{
    text-decoration:underline;
}

/* Help text */
.login p{
    margin-top:12px;
    font-size:13px;
}
</style>

<div id="login" class="screen login">
    <div class="box">
        <h2>Login</h2>
        <input id="loginId" placeholder="Id">
        <input id="loginPass" type="password" placeholder="Password">
        <button onclick="login()">Login</button>

        <div class="link" id="newUserOnlogin">
            New user? Sign up
        </div>

        <p style="color:#ff4d4d;">
            any issues call :
            <a href="tel:9384965236">9384965236</a>
        </p>
    </div>
</div>

<!-- signup section  -->
<style>
/* Signup screen background */
.signup{
    display:none;
    height:100vh;
    justify-content:center;
    align-items:center;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    font-family: Arial, sans-serif;
    overflow-y:auto;
}

/* Signup box */
.signup .box{
    width:340px;
    background:#1a2a3a;
    padding:30px 25px;
    border-radius:12px;
    text-align:center;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
    margin:20px 0;
}

/* Title */
.signup .box h2{
    margin-bottom:15px;
    color:white;
}

/* Profile image */
.signup .box img{
    border-radius:50%;
    border:3px solid #00aaff;
    object-fit:cover;
}

/* Inputs */
.signup input{
    width:100%;
    padding:12px;
    margin:8px 0;
    border:none;
    border-radius:8px;
    outline:none;
    font-size:14px;
    background:#f1f1f1;
    transition:0.2s;
}

.signup input:focus{
    background:white;
    box-shadow:0 0 0 2px #00aaff;
}

/* Main button */
.signup button{
    width:100%;
    padding:12px;
    margin-top:12px;
    background:linear-gradient(135deg, #00aaff, #0077ff);
    color:white;
    border:none;
    border-radius:8px;
    font-size:15px;
    font-weight:bold;
    cursor:pointer;
    transition:0.2s;
}

.signup button:hover{
    transform:translateY(-1px);
    box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

/* Small action buttons (OTP etc.) */
#sendOtpBtn{
    background:transparent;
    border:1px solid white;
    color:white;
    border-radius:8px;
    cursor:pointer;
    transition:0.2s;
}

#sendOtpBtn:hover{
    background:#00aaff;
    border-color:#00aaff;
}

/* Password toggle */
#btnText-log{
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:20px;
}

/* Link text */
.link{
    color:deepskyblue;
    cursor:pointer;
    margin-top:14px;
    font-size:14px;
}

.link:hover{
    text-decoration:underline;
}

/* Map box */
#mapBox{
    height:250px;
    display:none;
    border-radius:10px;
    overflow:hidden;
    margin-top:10px;
}

/* Map controls */
.map-controls{
    display:flex;
    justify-content:space-around;
    margin-top:10px;
    color:white;
    font-size:14px;
}

/* Popup overlay */
.popupOverlay2{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:none;
    justify-content:center;
    align-items:center;
}

/* Popup box */
.popupBox2{
    background:#222;
    padding:20px;
    border-radius:10px;
    width:300px;
    max-height:80vh;
    overflow:auto;
    color:white;
}

/* Function item */
.function-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
    background:#111;
    padding:8px;
    border-radius:6px;
}

.function-item img{
    width:40px;
}
</style>


<div id="signup" class="screen signup">
    <!-- HTML signup -->
    <div class="box">
        <h2>Sign Up</h2>
        <img id="profile_img_on_signup" src="https://imgs.search.brave.com/dWW0ceXApQM51Ca7UhAtD012yPBSCUVPdivBDucIk9A/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pLnBp/bmltZy5jb20vb3Jp/Z2luYWxzL2U0LzE2/LzQyL2U0MTY0MmM0/NzhlODEzYWZjMjli/ZTE1ZWE1YzM4NDQw/LmpwZw" alt="Internet Error" style="width:120px;height:120px;margin-bottom:10px;border-radius: 50%; margin-top: 10px;">
        <input id="profile_upload_input" type="file" accept="image/*" style="display:none">
        <input id="newwwid" style="width:100%;" placeholder="Id" readonly>
        <input id="name_signup" style="width: 100%;" placeholder="Name">
        <input type="number" id="mobile_signup" style="width:100%;" placeholder="Mobile Number">
        <div style="display: flex;justify-content: space-around;">
            <input type="number" id="otp_signup" style="width:100%;" placeholder="OTP">
            <button id="sendOtpBtn" style="width: 60px; margin-top: 5px;background-color: #1a2a3a00;color: white;border: solid 1px white; border-radius: 10%;" onclick="sendOtp()">Send OTP</button>
        </div>
        <div style="display: flex;justify-content: space-around;">
            <input id="password_signup" style="width: 85%;" type="password" placeholder="Password">
            <div id="btnText-log" style="width: 30px;margin-top: 3px;background-color: #79828600;font-size: 2rem;cursor: pointer;" onclick="togglePass()">ðŸ”’</div>
        </div>
        <div style="display: flex;justify-content: space-around;">
            <input id="address_signup" style="width: 85%;" placeholder="Address (click icon to get)" readonly>
            <div style="width: 30px;height: 40px;" onclick="openMap()"><img style="width: 30px;height: 40px;padding: 0;margin: 0;padding-top: 5px;" src="https://img.icons8.com/?size=100&id=6OOnASO9fxuG&format=png&color=000000" alt=""></div>
        </div><br>
        <div id="mapBox" style="position:relative;"></div>
        <!-- map type switching controls -->
        <div id="mapControls" class="map-controls">
            <label><input type="radio" name="mapType" value="road" checked> Road</label>
            <label><input type="radio" name="mapType" value="satellite"> Satellite</label>
        </div>

        <button onclick="signup()">Create Account</button>
        <div class="link" id="olduseronSignup">
            Back to Login
        </div>
    </div>
</div>


<!-- home section  -->

<style>
    .topbar{
        background:linear-gradient(135deg, #0a5269, #076886);
        padding:12px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        color:white;
    }
    .big-btn{
        width:200px;
        height:200px;
        margin:40px auto;
        background:#00d8ff ;
        border-radius:50%;
        display:flex;
        justify-content:center;
        border: solid 10px #1c1b1b;
        align-items:center;
        font-size:22px;
        /* cursor:pointer; */
        color:rgb(111, 99, 99);
        position:relative;
    }
    .bottombar{
        width:100%;
        padding:8px;
    }

    /* ===== Square Slideshow ===== */
    .slide-box{
        width:100%;
        max-width:300px;
        aspect-ratio:1/1;
        overflow:hidden;
        margin:10px auto;
        border-radius:12px;
        position:relative;
    }
    .bott-tit{
        display: flex;
        justify-content: space-between;
        padding-right: 15px;
        align-items: center;
    }
    .truck-box{
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:center;
        gap:8px;
    }
    .truck-box img{
        width:90px;
        height:auto;
    }

    .slide-track{
        display:flex;
        height:100%;
        transition:transform 0.6s ease;
    }
    .slide-track img{
        width:100%;
        height:100%;
        object-fit:cover;
        flex-shrink:0;
    }

    /* Loader */
    .loader::before {
        content: "";
        position: absolute;
        inset: 0;
        border: 16px solid transparent;
        border-top: 4px solid #fff;
        border-radius: 50%;
        animation: spin 2s linear infinite;
    }
    .pobtn{
        background-color: #113b5d;
        color: #78e6f9;
        height: 40px;
    }
    @keyframes spin {
        from { transform: rotate(0deg); }
        to   { transform: rotate(360deg); }
    }
    #qty{ width:30px; text-align:center; font-size:16px;height: 30px; }
    #idbtn-l, #idbtn-r{ width:35px; height: 35px; font-size:16px;background-color: coral; }
    #idbtn-l{ border-radius: 50% 0 0 50%; }
    #idbtn-r{ border-radius: 0 50% 50% 0; }
    .new_pop_up{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:9999;
    animation:fadeIn 0.2s ease;
}

.pop_up_content{
    background:#1a2a3a;
    color:white;
    padding:20px;
    border-radius:12px;
    min-width:260px;
    box-shadow:0 10px 25px rgba(0,0,0,0.4);
    animation:scaleIn 0.2s ease;
}

.pop_up_content h2{
    margin:0;
    font-size:18px;
}

.pop_up_content button{
    background:#0b5fa5;
    color:white;
    border:none;
    padding:6px 12px;
    border-radius:6px;
    cursor:pointer;
}

.pop_up_content input{
    border:none;
    background:#111;
    color:white;
    padding:5px;
    border-radius:4px;
}

/* animations */
@keyframes fadeIn{
    from{opacity:0;}
    to{opacity:1;}
}

@keyframes scaleIn{
    from{transform:scale(0.8);}
    to{transform:scale(1);}
}

</style>


<div id="home" class="screen home">
    <div class="topbar">
        <span onclick="showHome()" >JSS Water</span> 
        <div style="display:flex; gap:15px; align-items:center;">
            <div onclick="showCart()">Cart ðŸ›’</div>
            <img id="homescreenprofile" src="https://cdn-icons-png.flaticon.com/512/847/847969.png"
                onclick="showProfile()"
                style="width:32px; height:32px; border-radius:50%;">
        </div>
    </div>
    <div id="bigBtn" class="big-btn" onclick="handleBigBtn()">
        <div id="btnContent">
            <div id="btnText">Need Water</div>
        </div>
    </div>

    <div class="bottombar">
        
        <div class="bott-tit">
            <h4>Function Order Items </h4>
            <button class="pobtn" onclick="openFunctionOrder()">Place OrderâŒ¯âŒ²</button>
        </div>
        <div class="slide-box">
            <div class="slide-track" id="slideTrack"></div>
        </div>
    </div>

    <div id="cartScreen" style="display:none; padding:15px;">
        <div id="cartBox" class="cartBox"></div>
    </div>

    <div id="profileScreen" style="display:none; padding:15px; text-align:center;">
        <div id="profileContainer"></div>
    </div>

    <div id="functionOdDiv" style="display: none;">

    </div>
    <div id="billScreen" style="display:none;">
        <div id="billDetails"></div>
    </div>
</div>

</body>
</html>